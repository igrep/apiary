<!DOCTYPE HTML>
<html><head><title>Example of API documentation auto generation</title><link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"><script src="http://code.jquery.com/jquery-2.1.1.min.js"></script><script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script>/*! jquery.cookie v1.4.1 | MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(arguments.length>1&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});</script><script>"use strict";$.cookie.json=true;$.cookie.defaults.path=window.location.pathname;$.cookie.defaults.expires=365;(function(){function get_panel_ids_common(selector){var ids=[];$(selector).each(function(){ids.push($(this).attr("id"))});return ids}function get_opened_panel_ids(){return get_panel_ids_common(".collapse.in")}function get_all_panel_ids(){return get_panel_ids_common(".collapse")}function open_panel_by_id(id){$('[id="'+id+'"]').addClass("in")}function save_panel_state(){$.cookie("panel",get_opened_panel_ids())}function restore_panel_state(){$.each($.cookie("panel")||[],function(){open_panel_by_id(this)})}function close_all_panels(){$(".collapse.in").collapse("hide");save_panel_state([])}function open_all_panels(){$(".collapse").not(".in").collapse("show");save_panel_state(get_all_panel_ids())}function toggle_all_panels(){get_opened_panel_ids().length==0?open_all_panels():close_all_panels()}$(function(){restore_panel_state();$(".collapse").on("shown.bs.collapse",save_panel_state);$(".collapse").on("hidden.bs.collapse",save_panel_state);$("h1").click(toggle_all_panels)})})();if(location.protocol.slice(0,4)=="http"){(function(){$(function(){var update_test_route_functions=[];var update_test_query_functions=[];$(".panel").each(function(){var panel=$(this);var panel_id=panel.find(".panel-collapse").attr("id");panel.find(".route-parameters tr:first").append($("<th>value</th>"));panel.find(".route-parameters tr:gt(0)").append($('<td><input class="form-control input-sm" /></td>'));panel.find(".query-parameters tr:first").append($("<th>value</th>"));panel.find(".query-parameters tr:gt(0)").append($('<td><div class="input-group"><span class="input-group-addon"><input type="checkbox"/></span><input class="form-control input-sm"/></div></td>'));panel.find(".method").each(function(){var method=$(this);var h4=method.find("h4:first");var method_str=h4.text();var div=$('<div class="request-test">');method.find("h4:first").replaceWith(div);div.append($('<button class="test-method btn btn-default">'+method_str+"</button>"));var span=$('<span class="route-string">');div.append(span);span.append($('<span class="route-url"></span>'));span.append($('<span class="route-params"></span>'));var callout=$('<div class="hidden request-result bs-callout"><div class="clearfix title"><h4 class="pull-left"></h4></div><div class="well headers"><pre><code></code></pre></div><div class="body"><pre><code></code></pre></div></div>');var close=$('<div class="close-btn pull-right">&times;</div>');callout.find(".title").append(close);close.click(function(){callout.addClass("hidden")});method.find(".action:last").append(callout)});var route_params={};panel.find(".route-parameters tr:gt(0)").each(function(){var p=$(this);route_params[p.find("td:first").text()]=p.find("td:last input")});function get_route(title){var ret="";title.children().each(function(){var p=$(this);if(p.hasClass("splitter")){ret+="/"}else if(p.hasClass("path")){ret+=p.text()}else if(p.hasClass("fetch")){ret+=route_params[p.text()].val()}});return ret}var route_template=panel.find(".panel-title");var route_url=panel.find(".route-url");function update_test_route(){var route=get_route(route_template);route_url.text(route)}update_test_route_functions.push(update_test_route);function save_route_parameters(){var save={};$.each(route_params,function(k,v){save[k]=v.val()});var rp=$.cookie("route")||{};rp[panel_id]=save;$.cookie("route",rp)}panel.find(".route-parameters tr:gt(0) input").keyup(update_test_route).change(save_route_parameters);panel.find(".method").each(function(){var method=$(this);var method_str=method.find(".test-method").text();var query_params={};method.find(".query-parameters tr:gt(0)").each(function(){var p=$(this);var checkbox=p.find('td:last input[type="checkbox"]');var input=p.find("td:last input.form-control");query_params[p.find("td:first").text()]={checkbox:checkbox[0],input:input}});function get_query_param(){var ret="";$.each(query_params,function(name,value){if(value.checkbox.checked){var val=value.input.val();if(val.length==0){ret+="&"+name}else{$.each(val.split(" "),function(){ret+="&"+name+"="+this})}}});if(ret.length>0){ret="?"+ret.slice(1)}return ret}var query_param=method.find(".route-params");function update_query_param(){query_param.text(get_query_param())}update_test_query_functions.push(update_query_param);function save_query_param(){var save={};$.each(query_params,function(name,value){save[name]={checkbox:value.checkbox.checked,value:value.input.val()}});var qp=$.cookie("query")||{};if(!qp[panel_id]){qp[panel_id]={}}qp[panel_id][method_str]=save;$.cookie("query",qp)}function update_and_save_query_param(){update_query_param();save_query_param()}method.find('.query-parameters input[type="checkbox"]').change(update_and_save_query_param);method.find(".query-parameters input.form-control").keyup(update_query_param).change(save_query_param);var method_btn=method.find(".test-method");var route_url=method.find(".route-url");var result=method.find(".request-result");var accept=method.find(".accept");function request_test(){if(method_btn.hasClass("disabled")){return}var url=route_url.text()+query_param.text();var meth=method_str=="*"?"GET":method_str;method_btn.addClass("disabled");function request_callback(data,status,xhr){var ct=xhr.getResponseHeader("Content-Type");var code=xhr.status;result.find("h4").text(code+" "+status+' "'+ct+'"');result.find(".headers code").text(xhr.getAllResponseHeaders());if(ct.slice(0,16)=="application/json"){try{var json=JSON.stringify(JSON.parse(data),undefined,2);result.find(".body code").text(json)}catch(e){result.find(".body code").text(e+"\n\n"+data)}}else{result.find(".body code").text(data)}}function beforeSend(xhr){if(accept.length==1){xhr.setRequestHeader("Accept",accept.text())}}$.ajax({type:meth,url:url,dataType:"text",beforeSend:beforeSend}).done(function(data,status,xhr){request_callback(data,status,xhr);result.addClass("bs-callout-primary");result.removeClass("bs-callout-danger")}).fail(function(xhr,status,err){request_callback(err,status,xhr);result.addClass("bs-callout-danger");result.removeClass("bs-callout-primary")}).always(function(){result.removeClass("hidden");method_btn.removeClass("disabled")})}method.find(".test-method").click(request_test)})});function restore_route_parameters(){$.each($.cookie("route")||{},function(id,dict){var panel=$('[id="'+id+'"]');panel.find(".route-parameters tr:gt(0)").each(function(){var row=$(this);var key=row.find("td:first").text();row.find("td:last input").val(dict[key]||"")})})}function restore_query_parameters(){$.each($.cookie("query")||{},function(id,dict){var panel=$('[id="'+id+'"]');panel.find(".method").each(function(){var method=$(this);var method_str=method.find(".test-method").text();method.find(".query-parameters tr:gt(0)").each(function(){var row=$(this);var key=row.find("td:first").text();var checkbox=row.find('td:last input[type="checkbox"]')[0];var input=row.find("td:last input.form-control");checkbox.checked=dict[method_str][key].checkbox||false;input.val(dict[method_str][key].value||"")})})})}restore_route_parameters();restore_query_parameters();$.each(update_test_route_functions,function(){this()});$.each(update_test_query_functions,function(){this()})})})()}</script><style>.fetch{text-decoration:underline}.type .rest{color:gray}footer{padding-top:30px;padding-bottom:50px;margin-top:20px;text-align:center;color:#777;border-top:1px solid #e5e5e5}.description{margin-bottom:20px}table{margin-top:15px !important;margin-bottom:0 !important}table.route-parameters{margin-top:0 !important;border-bottom:1px solid #ddd;background-color:#f5f5f5}.method{margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid #ddd}.method:last-child{margin-bottom:0;padding-bottom:0;border-bottom:0}.methods div{margin-left:10px;color:#999}.panel-heading,h1{cursor:pointer}.precondition{margin-bottom:10px}.action{margin-bottom:20px}.action:last-child{margin-bottom:0}.no-description{color:#aaa}.test-method{margin-right:10px;font-weight:bold}.request-test{margin-bottom:20px}.route-string{color:#aaa}.request-result pre{all:unset}.close-btn{font-size:20px;font-weight:700px;opacity:.2;cursor:pointer;position:relative;top:-6px}.close-btn:hover{opacity:1}.bs-callout{padding:20px;margin:20px 0;border:1px solid #eee;border-left-width:5px;border-radius:3px}.bs-callout h4{margin-top:0;margin-bottom:5px}.bs-callout p:last-child{margin-bottom:0}.bs-callout code{border-radius:3px}.bs-callout+.bs-callout{margin-top:-5px}.bs-callout-default{border-left-color:#777}.bs-callout-default h4{color:#777}.bs-callout-primary{border-left-color:#428bca}.bs-callout-primary h4{color:#428bca}.bs-callout-success{border-left-color:#5cb85c}.bs-callout-success h4{color:#5cb85c}.bs-callout-danger{border-left-color:#d9534f}.bs-callout-danger h4{color:#d9534f}.bs-callout-warning{border-left-color:#f0ad4e}.bs-callout-warning h4{color:#f0ad4e}.bs-callout-info{border-left-color:#5bc0de}.bs-callout-info h4{color:#5bc0de}</style></head><body><div class="container"><div class="page-header"><h1>Example of API documentation auto generation</h1></div><div class="description"><p>source file: <a href="https://github.com/philopon/apiary/blob/master/examples/api.hs">here</a></p></div><div id="no-group"><div class="panel panel-default"><div class="panel-heading clearfix" data-toggle="collapse" data-target="[id=&#39;collapse--/precondition&#39;]"><h3 class="panel-title pull-left"><span class="splitter">/</span><span class="path">precondition</span></h3><div class="methods"><div class="pull-right">*</div></div></div><div id="collapse--/precondition" class="panel-collapse collapse"><div class="panel-body"><div class="method"><h4>*</h4><div class="action col-sm-offset-1 col-md-offset-1"><div class="well well-sm precondition"><p>Preconditions:</p><ul><li>Accept: text/plain</li><li>HTTP/1.1 only</li><li>user <strong>defined</strong> precondition.</li></ul></div><script class="accept" type="text/plain">text/plain</script><div><p>precondition test</p></div></div></div></div></div></div><div class="panel panel-default"><div class="panel-heading clearfix" data-toggle="collapse" data-target="[id=&#39;collapse--/api/documentation&#39;]"><h3 class="panel-title pull-left"><span class="splitter">/</span><span class="path">api</span><span class="splitter">/</span><span class="path">documentation</span></h3><div class="methods"><div class="pull-right">GET</div></div></div><div id="collapse--/api/documentation" class="panel-collapse collapse"><div class="panel-body"><div class="method"><h4>GET</h4><div class="action col-sm-offset-1 col-md-offset-1"><div><p>this page</p></div></div></div></div></div></div></div><div id="group-cat group"><h2>cat group</h2><div class="panel panel-default"><div class="panel-heading clearfix" data-toggle="collapse" data-target="[id=&#39;collapse-cat group-/api/cat&#39;]"><h3 class="panel-title pull-left"><span class="splitter">/</span><span class="path">api</span><span class="splitter">/</span><span class="path">cat</span></h3><div class="methods"><div class="pull-right">POST</div><div class="pull-right">GET</div></div></div><div id="collapse-cat group-/api/cat" class="panel-collapse collapse"><div class="panel-body"><div class="method"><h4>GET</h4><div class="action col-sm-offset-1 col-md-offset-1"><div><p>get current name and age.</p></div></div></div><div class="method"><h4>POST</h4><div class="action col-sm-offset-1 col-md-offset-1"><div><p>set name and age from query parameter.</p></div><div><table class="query-parameters table table-condensed"><caption>Query parameters</caption><tr><th class="col-sm-1 col-md-1">name</th><th class="col-sm-1 col-md-1">num</th><th class="col-sm-1 col-md-1">type</th><th>description</th></tr><tr><td>name</td><td>first</td><td><span title="Text(nullable)">Text?</span></td><td><span class="no-description">no description</span></td></tr><tr><td>age</td><td>option</td><td>Int</td><td><ul><li>age of cat.</li><li>cute!</li></ul></td></tr></table></div></div></div></div></div></div><div class="panel panel-default"><div class="panel-heading clearfix" data-toggle="collapse" data-target="[id=&#39;collapse-cat group-/api/cat/name::Text/age::Int&#39;]"><h3 class="panel-title pull-left"><span class="splitter">/</span><span class="path">api</span><span class="splitter">/</span><span class="path">cat</span><span class="splitter">/</span><span class="fetch">name</span><span class="splitter">/</span><span class="fetch">age</span></h3><div class="methods"><div class="pull-right">POST</div></div></div><div id="collapse-cat group-/api/cat/name::Text/age::Int" class="panel-collapse collapse"><table class="table table-condensed route-parameters"><tr><th class="col-sm-1 com-md-1">name</th><th class="col-sm-1 com-md-1">type</th><th>description</th></tr><tr><td>name</td><td>Text</td><td><ul><li>name of cat.</li><li>if null, homeless.</li></ul></td></tr><tr><td>age</td><td>Int</td><td>age</td></tr></table><div class="panel-body"><div class="method"><h4>POST</h4><div class="action col-sm-offset-1 col-md-offset-1"><div><p>set name and age from route.</p></div></div></div></div></div></div></div><div id="group-dog group"><h2>dog group</h2><div class="panel panel-default"><div class="panel-heading clearfix" data-toggle="collapse" data-target="[id=&#39;collapse-dog group-/api/dog/i::Int/**rest&#39;]"><h3 class="panel-title pull-left"><span class="splitter">/</span><span class="path">api</span><span class="splitter">/</span><span class="path">dog</span><span class="splitter">/</span><span class="fetch">i</span><span class="splitter">/</span><span class="rest">**</span><span class="fetch">rest</span></h3><div class="methods"><div class="pull-right">*</div></div></div><div id="collapse-dog group-/api/dog/i::Int/**rest" class="panel-collapse collapse"><table class="table table-condensed route-parameters"><tr><th class="col-sm-1 com-md-1">name</th><th class="col-sm-1 com-md-1">type</th><th>description</th></tr><tr><td>i</td><td>Int</td><td><span class="no-description">no description</span></td></tr><tr><td>rest</td><td>[Text]</td><td><span class="no-description">no description</span></td></tr></table><div class="panel-body"><div class="method"><h4>*</h4><div class="action col-sm-offset-1 col-md-offset-1"><div class="well well-sm precondition"><p>Preconditions:</p><ul><li><span class="fetch">i</span> is even.</li></ul></div><div><p>twice</p></div></div><div class="action col-sm-offset-1 col-md-offset-1"><div class="well well-sm precondition"><p>Preconditions:</p><ul><li><span class="fetch">i</span> is odd.</li></ul></div><div><p>succ</p></div></div></div></div></div></div></div></div></body><footer>This API documentation generated by <a href="https://github.com/philopon/apiary">apiary</a> web framework.</footer></html>